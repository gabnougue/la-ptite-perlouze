<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="D√©couvrez notre boutique-atelier √† Saint-P√©e-sur-Nivelle o√π bijoux en pierres naturelles et cr√©ations en bois se rencontrent.">
  <title>La Boutique - La p'tite perlouze üåº</title>
  <link rel="stylesheet" href="/css/style.css">
  <script>
    // Application imm√©diate du th√®me pour √©viter le flash
    (function(){var t=localStorage.getItem('perlouze-theme');if(!t){var s=localStorage.getItem('perlouze-theme-setting'),m=(new Date).getMonth()+1,d=(new Date).getDate();t=s&&s!=='auto'?s:(m===10&&d>=15)||(m===11&&d===1)?'halloween':m===12||(m===1&&d<=6)?'noel':(m===1&&d>=7)||m===2||(m===3&&d<=19)?'hiver':(m===3&&d>=20)||m===4||m===5||(m===6&&d<=20)?'printemps':(m===6&&d>=21)||m===7||m===8||(m===9&&d<=22)?'ete':(m===9&&d>=23)||(m===10&&d<15)||(m===11&&d>=2)?'automne':'printemps';}document.documentElement.setAttribute('data-theme',t);})();
  </script>
</head>
<body>
  <!-- Header -->
  <header>
    <div class="header-container">
      <a href="/" class="logo">La p'tite perlouze</a>
      <button class="menu-toggle" id="menu-toggle" aria-label="Ouvrir le menu">
        <span class="hamburger-line"></span>
        <span class="hamburger-line"></span>
        <span class="hamburger-line"></span>
      </button>
      <nav id="main-nav">
        <ul>
          <li><a href="/">Accueil</a></li>
          <li><a href="/catalogue">Catalogue</a></li>
          <li><a href="/contact">Contact</a></li>
          <li>
            <a href="/boutique" class="active" style="background: var(--lavande) !important; color: white; padding: 0.5rem 1rem; border-radius: 20px; font-weight: 600;">
              üè° La Boutique
            </a>
          </li>
          <li>
            <a href="/panier" class="cart-icon">
              üõí
              <span class="cart-count" id="cart-count">0</span>
            </a>
          </li>
        </ul>
      </nav>
    </div>
  </header>

  <!-- Hero Section -->
  <section class="hero fade-in">
    <h1>Notre Boutique √† Saint-P√©e-sur-Nivelle</h1>
    <p class="decoration-heart">‚ô°</p>
    <p>L√† o√π perles et bois se rencontrent</p>
  </section>

  <!-- Page Boutique -->
  <div class="container">
    <!-- Introduction -->
    <section class="about-section fade-in">
      <h2 class="section-title">Un Lieu, Deux Univers, Une Harmonie</h2>
      <div class="card">
        <p style="text-align: center; font-size: 1.1rem; line-height: 1.8; max-width: 800px; margin: 0 auto;">
          Nich√©e au c≈ìur de Saint-P√©e-sur-Nivelle, notre boutique-atelier est bien plus qu'un simple commerce.
          C'est un espace de rencontre entre deux passions, deux savoir-faire qui dialoguent naturellement :
          les bijoux en pierres naturelles d'Yvonne et les cr√©ations en bois de Jean-Michel.
        </p>
        <p style="text-align: center; font-size: 1.1rem; line-height: 1.8; max-width: 800px; margin: 1rem auto;">
          D√®s que vous franchissez la porte, vous entrez dans un univers o√π chaque pierre raconte une histoire,
          o√π chaque essence de bois respire l'authenticit√©. Les bracelets d'am√©thyste c√¥toient les porte-bijoux
          en ch√™ne massif, les colliers de quartz rose reposent sur des √©crins sculpt√©s √† la main.
        </p>
        <p style="text-align: center; font-size: 1.1rem; line-height: 1.8; max-width: 800px; margin: 1rem auto;">
          Nous prenons le temps de vous accueillir, de comprendre vos envies, de vous conseiller avec passion.
          Ici, chaque pi√®ce est unique, fabriqu√©e avec soin dans notre atelier attenant. Vous pourrez m√™me
          assister √† la naissance d'une cr√©ation, sentir le parfum du bois fra√Æchement travaill√©,
          d√©couvrir l'√©clat d'une pierre que nous venons de recevoir.
        </p>
        <p style="text-align: center; font-size: 1.1rem; line-height: 1.8; max-width: 800px; margin: 1rem auto;">
          Venez nous rendre visite. Prenez le temps de fl√¢ner, de toucher, de ressentir.
          Notre boutique est un havre de s√©r√©nit√© o√π l'artisanat authentique prend tout son sens.
          <span class="decoration-flower">‚úø</span>
        </p>
      </div>
    </section>

    <!-- Collaboration -->
    <section class="featured-products fade-in" style="margin-top: 3rem;">
      <div class="card" style="background: linear-gradient(135deg, rgba(139, 69, 19, 0.05), rgba(160, 82, 45, 0.05)); border-left: 4px solid var(--lavande); padding: 2rem;">
        <h3 style="color: var(--lavande); font-family: var(--font-manuscrite); font-size: 2rem; margin-bottom: 1.5rem; text-align: center;">
          ‚ú® La Magie de la Collaboration
        </h3>
        <p style="text-align: center; font-size: 1.2rem; line-height: 1.8; max-width: 700px; margin: 0 auto; color: var(--texte-principal); font-style: italic;">
          Sous un bracelet, un porte-bijou en bois. Sur une table en ch√™ne, un collier de perles nacr√©es.
          <br><br>
          Dans notre boutique, chaque cr√©ation trouve son √©cho dans l'autre univers.
          <br><br>
          Les courbes douces du bois accueillent l'√©clat des pierres. Les couleurs naturelles se r√©pondent,
          les mati√®res se compl√®tent. C'est cette harmonie que nous vous invitons √† d√©couvrir.
        </p>
        <div style="text-align: center; margin-top: 2rem;">
          <a href="https://www.leptitboutdebois.fr" id="boutdebois-link" class="btn btn-primary">
            ü™µ D√©couvrir les cr√©ations en bois de Jean-Michel ‚Üí
          </a>
        </div>
      </div>
    </section>

    <!-- Infos Pratiques -->
    <section class="values-section fade-in">
      <h2 class="section-title">üìç Infos Pratiques</h2>

      <div class="grid grid-3">
        <div class="card">
          <div style="font-size: 2.5rem; text-align: center; margin-bottom: 1rem;">üìç</div>
          <h3 style="text-align: center; color: var(--rose-poudre); font-weight: 600; margin-bottom: 0.5rem;">Adresse</h3>
          <p style="text-align: center; color: var(--texte-secondaire); line-height: 1.6;">
            121 Rue Legarreta<br>
            64310 Saint-P√©e-sur-Nivelle<br>
            Pays Basque
          </p>
        </div>

        <div class="card">
          <div style="font-size: 2.5rem; text-align: center; margin-bottom: 1rem;">üïê</div>
          <h3 style="text-align: center; color: var(--rose-poudre); font-weight: 600; margin-bottom: 0.5rem;">Horaires</h3>
          <p style="text-align: center; color: var(--texte-secondaire); line-height: 1.6;">
            Du mardi au samedi<br>
            10h √† 18h<br>
            <em style="font-size: 0.9rem; opacity: 0.8;">Ferm√© dimanche et lundi</em>
          </p>
        </div>

        <div class="card">
          <div style="font-size: 2.5rem; text-align: center; margin-bottom: 1rem;">üìû</div>
          <h3 style="text-align: center; color: var(--rose-poudre); font-weight: 600; margin-bottom: 0.5rem;">Contact</h3>
          <p style="text-align: center; color: var(--texte-secondaire); line-height: 1.6;">
            <a href="mailto:contact@laptiteperlouze.fr" style="color: var(--lavande); text-decoration: none;">contact@laptiteperlouze.fr</a><br>
            <a href="tel:+33559540000" style="color: var(--lavande); text-decoration: none;">05 59 54 00 00</a>
          </p>
        </div>
      </div>

      <!-- Google Maps -->
      <div class="card" style="margin-top: 2rem; padding: 0; overflow: hidden;">
        <iframe
          src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2900.903200081201!2d-1.5570571231795796!3d43.35813537111771!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0xd5116535759d119%3A0xf429d950a2e12970!2s121%20Rue%20Legarreta%2C%2064310%20Saint-P%C3%A9e-sur-Nivelle!5e0!3m2!1sfr!2sfr!4v1763147531317!5m2!1sfr!2sfr"
          width="100%"
          height="400"
          style="border:0;"
          allowfullscreen=""
          loading="lazy"
          referrerpolicy="no-referrer-when-downgrade">
        </iframe>
      </div>
    </section>

    <!-- Galerie Photos -->
    <section class="categories-section fade-in">
      <h2 class="section-title">üå∏ Notre Univers en Images</h2>

      <div id="gallery-grid" class="grid">
        <!-- Les images seront charg√©es dynamiquement -->
      </div>

      <div id="show-more-container" style="text-align: center; margin-top: 2rem; display: none;">
        <button id="show-more-btn" class="btn btn-primary">
          Voir plus de photos ‚ú®
        </button>
      </div>

      <p id="no-images-message" style="text-align: center; margin-top: 2rem; color: var(--texte-secondaire); font-style: italic; display: none;">
        Aucune photo pour le moment. Venez d√©couvrir notre boutique en personne ! üì∏
        <span class="decoration-heart">‚ô°</span>
      </p>
    </section>
  </div>

  <!-- Footer -->
  <footer>
    <p>üå∏ La p'tite perlouze üå∏</p>
    <p>Cr√©ations artisanales par Yvonne Lecocq</p>
    <p><a href="/contact">Nous contacter</a> | <a href="https://www.leptitboutdebois.fr" id="boutdebois-footer-link">Le p'tit bout de bois</a></p>
    <p style="margin-top: 1rem; font-size: 0.9rem; opacity: 0.8;">
      ¬© 2026 La p'tite perlouze - Tous droits r√©serv√©s
    </p>
  </footer>

  <style>
    /* Galerie photos - 3 colonnes sur grand √©cran */
    #gallery-grid {
      grid-template-columns: 1fr;
    }

    @media (min-width: 768px) {
      #gallery-grid {
        grid-template-columns: repeat(2, 1fr);
      }
    }

    @media (min-width: 1024px) {
      #gallery-grid {
        grid-template-columns: repeat(3, 1fr);
        max-width: 1200px;
        margin: 0 auto;
      }
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
      }
      to {
        opacity: 1;
      }
    }

    @keyframes fadeOut {
      from {
        opacity: 1;
      }
      to {
        opacity: 0;
      }
    }

    @keyframes zoomIn {
      from {
        transform: scale(0.8);
        opacity: 0;
      }
      to {
        transform: scale(1);
        opacity: 1;
      }
    }
  </style>

  <script src="/js/theme.js"></script>
  <script>
    // Mettre √† jour le compteur du panier
    function updateCartCount() {
      const cart = JSON.parse(localStorage.getItem('cart') || '[]');
      const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
      const cartCountElement = document.getElementById('cart-count');
      if (cartCountElement) {
        cartCountElement.textContent = totalItems;
        if (totalItems > 0) {
          cartCountElement.style.display = 'flex';
        } else {
          cartCountElement.style.display = 'none';
        }
      }
    }

    // Charger les param√®tres du site pour le lien boutdebois
    async function loadSiteSettings() {
      try {
        const response = await fetch('/api/settings');
        const settings = await response.json();

        if (settings.boutdebois_url) {
          const boutdeboisLink = document.getElementById('boutdebois-link');
          if (boutdeboisLink) {
            boutdeboisLink.href = settings.boutdebois_url;
          }
          // Mettre √† jour √©galement le lien du footer
          const footerLink = document.getElementById('boutdebois-footer-link');
          if (footerLink) {
            footerLink.href = settings.boutdebois_url;
          }
        }
      } catch (error) {
        console.error('Erreur lors du chargement des param√®tres:', error);
      }
    }

    // Charger les images de la boutique
    let allImages = [];
    let showingAll = false;
    const INITIAL_DISPLAY = 6;

    async function loadBoutiqueImages() {
      try {
        const response = await fetch('/api/boutique/images');
        allImages = await response.json();
        displayImages();
      } catch (error) {
        console.error('Erreur lors du chargement des images:', error);
        document.getElementById('no-images-message').style.display = 'block';
      }
    }

    function displayImages() {
      const galleryGrid = document.getElementById('gallery-grid');
      const showMoreContainer = document.getElementById('show-more-container');
      const noImagesMessage = document.getElementById('no-images-message');

      if (allImages.length === 0) {
        noImagesMessage.style.display = 'block';
        return;
      }

      const imagesToShow = showingAll ? allImages : allImages.slice(0, INITIAL_DISPLAY);

      galleryGrid.innerHTML = imagesToShow.map(img => `
        <div class="card" style="aspect-ratio: 1; overflow: hidden; cursor: pointer; padding: 1rem;" onclick="openImageModal('${img.image_path}')">
          <img src="${img.image_path}" alt="Boutique"
               style="width: 100%; height: 100%; object-fit: cover; transition: filter 0.5s ease-out, transform 0.5s ease-out; border-radius: 12px; filter: blur(20px); transform: scale(1.1); background: linear-gradient(135deg, var(--pastel-bleu), var(--pastel-peche));"
               loading="lazy" decoding="async"
               onload="this.style.filter='blur(0)'; this.style.transform='scale(1)'"
               onerror="this.style.filter='blur(0)'; this.style.transform='scale(1)'"
               onmouseover="if(this.style.filter==='blur(0px)' || this.style.filter==='blur(0)') this.style.transform='scale(1.05)'"
               onmouseout="this.style.transform='scale(1)'">
        </div>
      `).join('');

      if (allImages.length > INITIAL_DISPLAY) {
        showMoreContainer.style.display = 'block';
        const btn = document.getElementById('show-more-btn');
        btn.textContent = showingAll ? 'Voir moins de photos' : 'Voir plus de photos ‚ú®';
      } else {
        showMoreContainer.style.display = 'none';
      }
    }

    function toggleShowMore() {
      showingAll = !showingAll;
      displayImages();
      if (!showingAll) {
        document.getElementById('gallery-grid').scrollIntoView({ behavior: 'smooth' });
      }
    }

    function openImageModal(imagePath) {
      const modal = document.createElement('div');
      modal.style.cssText = `
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.2);
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
        z-index: 10000;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        animation: fadeIn 0.3s ease;
      `;

      modal.innerHTML = `
        <img src="${imagePath}" alt="Boutique"
             style="max-width: 90%; max-height: 90%; border-radius: 20px; box-shadow: 0 10px 40px rgba(0,0,0,0.5); animation: zoomIn 0.3s ease;">
      `;

      modal.onclick = () => {
        modal.style.animation = 'fadeOut 0.2s ease';
        setTimeout(() => modal.remove(), 200);
      };

      document.body.appendChild(modal);
    }

    document.addEventListener('DOMContentLoaded', () => {
      updateCartCount();
      loadSiteSettings();
      loadBoutiqueImages();

      const showMoreBtn = document.getElementById('show-more-btn');
      if (showMoreBtn) {
        showMoreBtn.addEventListener('click', toggleShowMore);
      }
    });
  </script>
</body>
</html>
